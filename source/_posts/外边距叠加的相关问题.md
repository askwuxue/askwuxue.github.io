---
title: 外边距叠加的相关问题
date: 2018-03-11 21:23:14
tags: CSS
categories: CSS
---

#### 外边距叠加的问题

外边距叠加是一个简单的概念：在CSS中，两个或多个（特殊情况：一个）毗邻的普通流中的盒子（可能是父子元素，也可能是兄弟元素）在垂直方向上的外边距会发生叠加，这种形成的外边距称之为外边距叠加。

**关键词**: 两个或者多个，盒子（块级元素），毗邻，普通流，垂直方向

**注意[浮动元素](https://developer.mozilla.org/zh-CN/docs/Web/CSS/float)和[绝对定位元素](https://developer.mozilla.org/zh-CN/docs/Web/CSS/position#absolute)的外边距不会折叠（因为这里触发了 [块格式化上下文 Block Formatting Context， BFC](https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context)）。**

1. 兄弟元素之间，在垂直方向上发生了外边距叠加

![兄弟元素间](/img/外边距/外边距叠加.png)

2.当父子元素之间的margin-top或者margin-bottom没有被border，padding隔开的时候，他们的内外边距会发生叠加。

![父子元素间](/img/外边距/外边距叠加2.png)

3. 单个的块级元素中不包含任何内容，并且在其 [`margin-top`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/margin-top) 与 [`margin-bottom`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/margin-bottom) 之间没有边框、内边距、行内内容、[`height`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/height)、[`min-height`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/min-height) 将两者分开，则该元素的上下外边距会折叠。

![单个块级元素](/img/外边距/外边距叠加3.png)

**注意**


- 即使某一外边距为0，这些规则仍然适用。因此就算父元素的外边距是0，第一个或最后一个子元素的外边距仍然会“溢出”到父元素的外面。
- 如果参与折叠的外边距中包含负值，折叠后的外边距的值为最大的正边距与最小的负边距（即绝对值最大的负边距）的和。
- 如果所有参与折叠的外边距都为负，折叠后的外边距的值为最小的负边距的值。这一规则适用于相邻元素和嵌套元素。


##### 外边距叠加的影响

​	外边距叠加的影响不一一列举，常见的就是想要实现子元素的margin-top等效果，结果发现父盒子也被加上了margin-top，从而影响了父盒子的位置。遇到类似问题，能够想到是因为外边距合并导致的就可以了。当然，外边距叠加并不一定都是负面的影响，如下图，也有正面的影响。在文字排版的时候，利用外边距合并，实现了段落之间相同宽度的效果。在没有想到更好的解决方案之前，这可以作为一个备选方案。
![外边距合并的正面影响](/img/外边距/外边距叠加4.png)

##### 如何消除外边距叠加


从外边距叠加入手，就可以解决这个问题。
1. 如果两个元素上下毗邻，分别设置外边距的时候考虑一下，如果必须设置，考虑利用浮动或者绝对定位是否能解决。
2. 当嵌套块级元素的时候，看看时候能为他们设置padding或者border来破坏外边距叠加的条件
3. 不要为一个空元素设置上下边距，应该没有人会这么干。
4. inline-block 元素和其他任何元素之间不发生外边距叠加，也包括它的子元素
5. 创建了 BFC 的元素不会和它的子元素发生外边距叠加，不同的BFC中，不会发生外边距叠加


如有不正之处，欢迎指正。随着学习的深入，可能会进一步的对BFC的原理等进行输出。